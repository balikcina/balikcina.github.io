function loop(e,t){$.getJSON("https://vast-scrubland-9059.herokuapp.com/players/"+e[t]["player_id"]+".json",function(n){player_name=n["name"].replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()});playeravatar=n["avatar_url"];quoteurl=e[t]["source_url"];quotecontents=e[t]["quote"];quotedate=e[t]["source_date"];quotecontext=e[t]["context"];viewcount=e[t]["view_count"];quotelink="quotes.html?quote_id="+e[t]["id"];playerlink="players.html?name="+player_name;viewcount="Views: "+viewcount;encodedquote=replaceAll("'","%27",quotecontents);encodedquote=encodeURIComponent(encodedquote);encodedurl="http://balikcina.com/"+quotelink;encodedurl=encodeURIComponent(encodedurl);twitterlink="https://twitter.com/share?text="+encodedquote+" "+"&url="+encodedurl;if(quotecontext!=null&&quotecontext!=""&&quotecontext!=" "){thecontext="<em style='font-size: 12px;'>On "+quotecontext+": </em>"}else{thecontext=""}$("#top-quotes").append(function(){return"<div class='quote'>"+"<div class='row'>"+"<div class='col-xs-2 nopadding'>"+"<a href='"+playerlink+"'>"+"<img class='img-thumbnail' style='float:right' width='100%' src='"+playeravatar+"'></a>"+"</div>"+"<div class='col-xs-10' id='box"+t+"'>"+"<div class='topbar'>"+"<left>"+"<h1>"+"<span id='player_name"+t+"'>"+player_name+"</span>&nbsp;</h1>"+"</left>"+"<right>"+"<h3>"+viewcount+"</i></h3>"+"</right>"+"<div style='clear: both;'></div>"+"</div>"+"<div class='midbar'>"+thecontext+"</div>"+"<div style='clear: both;'></div>"+"<h2><div class='quotebar' id='quote"+t+"'>"+quotecontents+"</div></h2>"+"<div class='bottombar'><h3>"+"<a class='alignleft' id='showcomments"+t+"'><i class='fa fa-comment fa-lg'>&nbsp;</i></a> &nbsp;"+"<a href='"+quotelink+"'><i class='fa fa-ellipsis-h fa-lg'>&nbsp;</i>Details</a> &nbsp;"+"<a href='"+quoteurl+"' target='_blank'><i class='fa fa-clock-o fa-lg'>&nbsp; </i>"+quotedate+"</a> &nbsp;"+"<a class='alignright' href='"+twitterlink+"' target='_blank'><i class='fa fa-twitter fa-lg'></i>&nbsp;</a>"+"<a class='alignright' id='fbfeed"+t+"'><i class='fa fa-facebook-square fa-lg'></i>&nbsp;</a>"+"</h3></div>"+"<div class='clearfix'></div>"+"</div>"+"<div id='hiddenlink"+t+"'>"+quotelink+"</div>"+"</div></div>"+"<div class='clearfix'></div>"});$("#hiddenlink"+t).css("display","none");$("#top-quotes").fadeIn("slow");$("#quote"+t).css("cursor","pointer");$("#quote"+t).click(function(){window.open($("#hiddenlink"+t).html(),"_self")});$("#showcomments"+t).css("cursor","pointer");var r=0;$("#showcomments"+t).click(function(){if(r==0){$("#box"+t).append(function(){width=$("#box"+t).width()*.95;return"<div id='commentbox"+t+"' class='fb-comments' data-href='http://balikcina.com/"+$("#hiddenlink"+t).html()+"' data-width='"+width+"' data-numposts='10' data-colorscheme='light'></div>"});$("#commentbox"+t).css("display","none");FB.XFBML.parse($("#box"+t)[0],function(){$("#commentbox"+t).show("slow")})}else{$("#commentbox"+t).toggle("slow")}++r});$("#box"+t).mouseover(function(){$(this).addClass("hoverquote")});$("#box"+t).mouseout(function(){$(this).removeClass("hoverquote")});$("#fbfeed"+t).click(function(){fbquotecontents=$("#quote"+t).html();fbquotelink="http://balikcina.com/"+$("#hiddenlink"+t).html();FB.ui({method:"feed",name:"Balik Cina | Beautiful Quotes by Malaysian Politicians",caption:$("#player_name"+t).html(),description:fbquotecontents,link:fbquotelink,picture:"http://balikcina.com/img/balikcina.jpg",redirect_uri:"balikcina.com"},function(e){})})})}function range(e,t){var n=[];for(var r=e;r<t;r++){n.push(r)}return n}function replaceAll(e,t,n){return n.replace(new RegExp(escapeRegExp(e),"g"),t)}function escapeRegExp(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}$("#popquote").hide();$("#quotebuttons").hide();$(".carousel").carousel({interval:4500,pause:"false"});$.getJSON("https://vast-scrubland-9059.herokuapp.com/quotes.json",function(e){$("#quotenum").html(function(){return e.length});var t=range(0,e.length);$("#top-quotes").html(function(){return""});for(var n=1;n<=15;n++){var r=t.splice(Math.floor(Math.random()*e.length-1-n),1)[0];loop(e,r)}});$.getJSON("https://vast-scrubland-9059.herokuapp.com/tags.json",function(e){for(var t=0;t<e["player_tags"].length;t++){var n=e["player_tags"][t]["name"];var r="tags.html?tag="+e["player_tags"][t]["name"];$("#list-tags").append(function(){return"<a href='"+r+"'>"+n+" </a>"})}for(var t=0;t<e["quote_tags"].length;t++){var n=e["quote_tags"][t]["name"];var r="tags.html?tag="+e["quote_tags"][t]["name"];$("#list-tags").append(function(){return"<a href='"+r+"'>"+n+" </a>"})}})